<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if title %}{{ title }} - {% endif %}{{ (garden.site and garden.site.title) | default(site.title) | default("Digital Garden") }}</title>
  <meta name="description" content="{{ description | default((garden.site and garden.site.description) | default(site.description)) }}">
  
  <!-- ä¸»è¦æ ·å¼æ–‡ä»¶ -->
  <link rel="stylesheet" href="{{ 'src/assets/css/main.css' | hash }}">
  
  
  <!-- é¢„åŠ è½½ä¸»è¦JavaScript -->
  <link rel="preload" href="{{ 'src/assets/js/main.js' | hash }}" as="script" crossorigin="anonymous">
</head>
<body class="{% if hideSidebar %}no-sidebar{% endif %}{% if not garden.theme.showHeadingMarkers %} hide-heading-markers{% endif %}">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <h1 class="site-title">
          <a href="/">
            {% if garden.site and garden.site.logo %}
            <img src="{{ garden.site.logo }}" alt="{{ (garden.site and garden.site.title) | default(site.title) | default('Digital Garden') }}" class="site-logo">
            {% else %}
            {{ (garden.site and garden.site.title) | default(site.title) | default("Digital Garden") }}
            {% endif %}
          </a>
        </h1>
        
        <nav class="main-nav">
          <button class="mobile-nav-toggle" onclick="toggleMobileNav()">â˜°</button>
          <ul class="nav-list" id="navList">
            {% if garden.menu %}
            {% for menuItem in garden.menu %}
            <li><a href="{{ menuItem.url }}" {% if page.url == menuItem.url %}class="active"{% endif %}>{{ menuItem.name }}</a></li>
            {% endfor %}
            {% endif %}
            {% if garden.search.enabled %}
            <li><button class="search-toggle" onclick="toggleSearch()">ğŸ”</button></li>
            {% endif %}
          </ul>
        </nav>
      </div>
      
      {% if garden.search.enabled %}
      <!-- æœç´¢é®ç½© -->
      <div class="search-overlay" id="searchOverlay" onclick="closeSearch()"></div>
      
      <!-- æœç´¢æ¡† -->
      <div class="search-container" id="searchContainer">
        <div class="search-input-wrapper">
          <span class="search-icon">ğŸ”</span>
          <input type="text" id="searchInput" placeholder="æœç´¢ç¬”è®°...">
          <button class="search-clear" id="searchClear" style="display: none;">âœ•</button>
        </div>
        <div class="search-results-container" id="searchResultsContainer">
          <div class="search-suggestions" id="searchSuggestions"></div>
          <div class="search-results" id="searchResults"></div>
        </div>
      </div>
      {% endif %}
    </div>
  </header>


  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <main class="main-content">
    <div class="container">
      <div class="content-grid{% if hideSidebar %} content-grid--no-sidebar{% endif %}">
        <!-- ä¸»è¦å†…å®¹ -->
        <article class="main-article">
          {{ content | safe }}
        </article>
        
        <!-- ä¾§è¾¹æ  -->
        {% if not hideSidebar %}
        <aside class="sidebar">
          {% set pageHasHeadings = (page.templateContent or content) | hasHeadings %}
          {% if pageHasHeadings %}
          <div class="toc-section">
            <h3>ğŸ“‹ ç›®å½•</h3>
            <div class="table-of-contents" id="tableOfContents">
              <!-- ç›®å½•å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
            </div>
          </div>
          {% endif %}
          
          <!-- åå‘é“¾æ¥ -->
          {% if collections %}
          {% set backlinks = collections | backlinks(page) %}
          {% if backlinks and backlinks.length > 0 %}
          <div class="backlinks-section">
            <h3>ğŸ”— åå‘é“¾æ¥</h3>
            <ul class="backlinks-list">
              {% for link in backlinks %}
              {% if link and link.title and link.url %}
              <li class="backlink-item internal-link" data-url="{{ link.url }}" data-note-title="{{ link.title }}">
                <div class="backlink-title">{{ link.title }}</div>
                {% if link.excerpt %}
                <p class="backlink-excerpt">{{ link.excerpt | safe }}</p>
                {% endif %}
              </li>
              {% endif %}
              {% endfor %}
            </ul>
          </div>
          {% endif %}
          {% endif %}
          
        </aside>
        {% endif %}
      </div>
    </div>
  </main>

  <!-- é¡µè„š -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <!-- ç”¨æˆ·è‡ªå®šä¹‰footerå†…å®¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ -->
        {% if garden.footer and garden.footer.trim() %}
        <div class="custom-footer">{{ garden.footer | markdown | externalLinks | safe }}</div>
        {% else %}
        <!-- é»˜è®¤footerå†…å®¹ -->
        <div class="footer-main">
          <p class="footer-copyright">&copy; {{ (garden.site and garden.site.year) | default(site.year) | default(2024) }} {{ (garden.site and garden.site.author) | default(site.author) | default("Digital Garden") }}. All rights reserved.</p>
        </div>
        {% endif %}
        
        <!-- ä¸»é¢˜ä¿¡æ¯å’ŒæŠ€æœ¯æ ˆ - ä¸å¯è¢«é…ç½®è¦†ç›– -->
        <div class="theme-credits">
          <p class="footer-credits">
            Built with <span class="heart">â™¥ï¸</span> using <a href="https://www.11ty.dev/" target="_blank" rel="noopener">Eleventy</a> â€¢ 
            Theme designed by <a href="{{ themeInfo.website }}" target="_blank" rel="noopener">{{ themeInfo.designer }}</a>
          </p>
          <p class="footer-motto">è®©æƒ³æ³•è‡ªç”±è¿æ¥ï¼Œè®©çŸ¥è¯†è‡ªç„¶ç”Ÿé•¿ ğŸŒ±</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- æ‚¬åœé¢„è§ˆå®¹å™¨ -->
  <div id="note-preview" class="note-preview-popup"></div>
  
  <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
  <button id="back-to-top" class="back-to-top" onclick="scrollToTop()" title="è¿”å›é¡¶éƒ¨">
    â†‘
  </button>
  
  <!-- ESæ¨¡å—åŒ–JavaScript -->
  <script type="module" src="{{ 'src/assets/js/main.js' | hash }}"></script>
  
  <!-- ç½‘ç«™ç»Ÿè®¡ -->
  {% include "analytics.njk" %}
</body>
</html>